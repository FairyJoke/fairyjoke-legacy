{% extends "base.html" %}

{% block body %}

<div class="section row">
	<form method="get" action="{{ url_for('sdvx_musics') }}">
		<div class="input-field col s6 m2">
			<select multiple name="level">
				{% for i in range(1, 21)|reverse %}
					<option value="{{ i }}" {{ 'selected' if i in search.level }}>
						{{ i }}
					</option>
				{% endfor %}
			</select>
			<label>Level</label>
		</div>
		<div class="input-field col s6 m3">
			<select multiple name="genre">
				{% for genre in genres %}
					<option value="{{ genre }}" {{ 'selected' if genre in search.genre }}>
						{{ genres[genre] }}
					</option>
				{% endfor %}
			</select>
			<label>Genre</label>
		</div>
		<div class="input-field col s9 m5">
			<input type="text" name="text" placeholder="nyan cat" id="text" value="{{ search.text or '' }}">
			<label for="text">Text</label>
		</div>
		<div class="input-field col s3 m2">
			<button class="btn" type="submit">Search</button>
		</div>
	</form>
</div>
{% include "_pager.html" %}
<div class="sdvx-list row" id="sdvx-musics">
	{% for music in pager.items %}
	<div class="col m6 l3">
		<div class="card">
			<div class="card-image">
				<a href="{{ url_for('sdvx_music', music_id=music.id) }}">
					<img src="{{ url_for('get_jacket', music_id=music.id, difficulty=music.difficulties[-1].name.value) }}">
				</a>
				<div class="card-title difficulties">
					{% for diff in music.difficulties %}
					<div class="diff badge diff-{{ diff.name }}">{{ diff.level }}</div>
					{% endfor %}
				</div>
			</div>
			<div class="card-content">
				<div class="card-title">
					<div title="{{ music.title }}">
						{{ music.title }}
					</div>
					<div class="truncate" title="{{ music.artist }}">
						<small>{{ music.artist }}</small>
					</div>
				</div>
				<div class="genres">
					{% for genre in music.genres %}
					<span class="genre">{{ genre }}</span>
					{% endfor %}
				</div>
				<div class="date">
					{{ music.release_date }}
				</div>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
{% include "_pager.html" %}

{% endblock %}
